P8105 HW2
================
Jennifer Lee (UNI: jl2361)

We will first load the tidyverse.

``` r
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
    ## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
    ## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
    ## ✔ readr   2.1.2      ✔ forcats 0.5.2 
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

# Problem 1

``` r
nyctransit = read_csv('data/NYC_Transit.csv', col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c", ADA = "c")) %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, starts_with('route'), entrance_type, entry, exit_only, vending, ada) %>%
  mutate(entry = recode(entry, 'YES' = TRUE, 'NO' = FALSE),
         across(where(is.character), tolower))

head(nyctransit)
```

    ## # A tibble: 6 × 20
    ##   line  stati…¹ stati…² stati…³ route1 route2 route3 route4 route5 route6 route7
    ##   <chr> <chr>     <dbl>   <dbl> <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr> 
    ## 1 4 av… 25th st    40.7   -74.0 r      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>  
    ## 2 4 av… 25th st    40.7   -74.0 r      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>  
    ## 3 4 av… 36th st    40.7   -74.0 n      r      <NA>   <NA>   <NA>   <NA>   <NA>  
    ## 4 4 av… 36th st    40.7   -74.0 n      r      <NA>   <NA>   <NA>   <NA>   <NA>  
    ## 5 4 av… 36th st    40.7   -74.0 n      r      <NA>   <NA>   <NA>   <NA>   <NA>  
    ## 6 4 av… 45th st    40.6   -74.0 r      <NA>   <NA>   <NA>   <NA>   <NA>   <NA>  
    ## # … with 9 more variables: route8 <chr>, route9 <chr>, route10 <chr>,
    ## #   route11 <chr>, entrance_type <chr>, entry <lgl>, exit_only <chr>,
    ## #   vending <chr>, ada <chr>, and abbreviated variable names ¹​station_name,
    ## #   ²​station_latitude, ³​station_longitude

``` r
nrow(distinct(nyctransit, line, station_name))
```

    ## [1] 465

``` r
nrow(distinct(filter(nyctransit, ada == 'true'), line, station_name, .keep_all = TRUE))
```

    ## [1] 84

``` r
round(nrow(filter(nyctransit, vending == 'no', entry == TRUE)) / nrow(nyctransit) * 100, digits = 2)
```

    ## [1] 3.69

``` r
nyctransitreformat = 
  pivot_longer(
    nyctransit, 
    route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    names_prefix = 'route') 
```

``` r
nrow(distinct(filter(nyctransitreformat, route_name == 'a'), line, station_name, .keep_all = TRUE))
```

    ## [1] 60

``` r
nrow(distinct(filter(nyctransitreformat, route_name == 'a', ada == 'true'), line, station_name, .keep_all = TRUE))
```

    ## [1] 17

# Problem 2

``` r
mr_trashwheel = readxl::read_excel('data/Trash_Wheel.xlsx', 
                                   sheet = 1, 
                                   range = 'A2:N534') %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = as.integer(round(sports_balls, digit = 0)),
    id = paste('mr', row_number(), sep = '_')) %>%
    relocate(id)

professor_trashwheel = readxl::read_excel('data/Trash_Wheel.xlsx', 
                                   sheet = 2, 
                                   range = 'A2:N116') %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = as.integer(round(sports_balls, digit = 0)),
    id = paste('prof', row_number(), sep = '_')) %>%
    relocate(id)

total_trashwheel = bind_rows(mr_trashwheel, professor_trashwheel)

head(total_trashwheel)
```

    ## # A tibble: 6 × 15
    ##   id    dumpster month  year date                weigh…¹ volum…² plast…³ polys…⁴
    ##   <chr>    <dbl> <chr> <dbl> <dttm>                <dbl>   <dbl>   <dbl>   <dbl>
    ## 1 mr_1         1 May    2014 2014-05-16 00:00:00    4.31      18    1450    1820
    ## 2 mr_2         2 May    2014 2014-05-16 00:00:00    2.74      13    1120    1030
    ## 3 mr_3         3 May    2014 2014-05-16 00:00:00    3.45      15    2450    3100
    ## 4 mr_4         4 May    2014 2014-05-17 00:00:00    3.1       15    2380    2730
    ## 5 mr_5         5 May    2014 2014-05-17 00:00:00    4.06      18     980     870
    ## 6 mr_6         6 May    2014 2014-05-20 00:00:00    2.71      13    1430    2140
    ## # … with 6 more variables: cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <int>,
    ## #   homes_powered <dbl>, and abbreviated variable names ¹​weight_tons,
    ## #   ²​volume_cubic_yards, ³​plastic_bottles, ⁴​polystyrene

``` r
nrow(total_trashwheel)
```

    ## [1] 524

``` r
summary(mr_trashwheel)
```

    ##       id               dumpster      month                year     
    ##  Length:453         Min.   :  1   Length:453         Min.   :2014  
    ##  Class :character   1st Qu.:114   Class :character   1st Qu.:2015  
    ##  Mode  :character   Median :227   Mode  :character   Median :2018  
    ##                     Mean   :227                      Mean   :2017  
    ##                     3rd Qu.:340                      3rd Qu.:2019  
    ##                     Max.   :453                      Max.   :2021  
    ##       date                         weight_tons   volume_cubic_yards
    ##  Min.   :1900-01-20 00:00:00.00   Min.   :0.78   Min.   : 7.00     
    ##  1st Qu.:2015-12-26 00:00:00.00   1st Qu.:2.72   1st Qu.:15.00     
    ##  Median :2018-02-05 00:00:00.00   Median :3.19   Median :15.00     
    ##  Mean   :2017-07-03 05:36:57.22   Mean   :3.20   Mean   :15.41     
    ##  3rd Qu.:2019-05-28 00:00:00.00   3rd Qu.:3.68   3rd Qu.:15.00     
    ##  Max.   :2021-01-04 00:00:00.00   Max.   :5.62   Max.   :20.00     
    ##  plastic_bottles  polystyrene   cigarette_butts  glass_bottles   
    ##  Min.   : 210    Min.   : 210   Min.   :   980   Min.   :  0.00  
    ##  1st Qu.: 980    1st Qu.: 950   1st Qu.:  5000   1st Qu.:  9.00  
    ##  Median :1850    Median :1650   Median : 11000   Median : 18.00  
    ##  Mean   :1899    Mean   :1921   Mean   : 24522   Mean   : 22.45  
    ##  3rd Qu.:2640    3rd Qu.:2730   3rd Qu.: 32000   3rd Qu.: 32.00  
    ##  Max.   :5960    Max.   :6540   Max.   :310000   Max.   :110.00  
    ##   grocery_bags    chip_bags     sports_balls   homes_powered  
    ##  Min.   :  50   Min.   : 180   Min.   : 0.00   Min.   : 0.00  
    ##  1st Qu.: 425   1st Qu.: 800   1st Qu.: 5.00   1st Qu.:38.83  
    ##  Median : 820   Median :1327   Median : 9.00   Median :51.17  
    ##  Mean   :1104   Mean   :1558   Mean   :11.75   Mean   :45.32  
    ##  3rd Qu.:1620   3rd Qu.:2150   3rd Qu.:16.00   3rd Qu.:58.67  
    ##  Max.   :3750   Max.   :5085   Max.   :56.00   Max.   :93.67

``` r
summary(professor_trashwheel)
```

    ##       id               dumpster       month                year     
    ##  Length:71          Min.   : 1.0   Length:71          Min.   :2017  
    ##  Class :character   1st Qu.:18.5   Class :character   1st Qu.:2018  
    ##  Mode  :character   Median :36.0   Mode  :character   Median :2018  
    ##                     Mean   :36.0                      Mean   :2018  
    ##                     3rd Qu.:53.5                      3rd Qu.:2019  
    ##                     Max.   :71.0                      Max.   :2021  
    ##       date                         weight_tons    volume_cubic_yards
    ##  Min.   :2017-01-02 00:00:00.00   Min.   :0.610   Min.   : 6.00     
    ##  1st Qu.:2017-12-16 12:00:00.00   1st Qu.:1.575   1st Qu.:15.00     
    ##  Median :2018-09-01 00:00:00.00   Median :1.810   Median :15.00     
    ##  Mean   :2018-10-26 15:32:57.46   Mean   :1.908   Mean   :14.59     
    ##  3rd Qu.:2019-08-13 00:00:00.00   3rd Qu.:2.355   3rd Qu.:15.00     
    ##  Max.   :2021-01-04 00:00:00.00   Max.   :3.720   Max.   :18.00     
    ##  plastic_bottles  polystyrene    cigarette_butts glass_bottles  
    ##  Min.   : 657    Min.   : 1030   Min.   : 6000   Min.   : 0.00  
    ##  1st Qu.:3900    1st Qu.: 3675   1st Qu.: 8750   1st Qu.: 4.00  
    ##  Median :6000    Median : 5500   Median :12400   Median :11.00  
    ##  Mean   :5715    Mean   : 5900   Mean   :14167   Mean   :11.86  
    ##  3rd Qu.:7980    3rd Qu.: 8330   3rd Qu.:18000   3rd Qu.:18.00  
    ##  Max.   :9830    Max.   :11528   Max.   :33320   Max.   :32.00  
    ##   grocery_bags     chip_bags      sports_balls    homes_powered  
    ##  Min.   :  540   Min.   : 2900   Min.   :0.0000   Min.   :10.17  
    ##  1st Qu.:  945   1st Qu.: 5346   1st Qu.:0.0000   1st Qu.:26.25  
    ##  Median : 1300   Median : 7800   Median :0.0000   Median :30.17  
    ##  Mean   : 3246   Mean   : 9128   Mean   :0.1972   Mean   :31.81  
    ##  3rd Qu.: 3950   3rd Qu.:12990   3rd Qu.:0.0000   3rd Qu.:39.25  
    ##  Max.   :13450   Max.   :20100   Max.   :7.0000   Max.   :62.00

``` r
summary(total_trashwheel)
```

    ##       id               dumpster        month                year     
    ##  Length:524         Min.   :  1.0   Length:524         Min.   :2014  
    ##  Class :character   1st Qu.: 66.0   Class :character   1st Qu.:2016  
    ##  Mode  :character   Median :191.5   Mode  :character   Median :2018  
    ##                     Mean   :201.1                      Mean   :2017  
    ##                     3rd Qu.:322.2                      3rd Qu.:2019  
    ##                     Max.   :453.0                      Max.   :2021  
    ##       date                         weight_tons    volume_cubic_yards
    ##  Min.   :1900-01-20 00:00:00.00   Min.   :0.610   Min.   : 6.0      
    ##  1st Qu.:2016-04-30 00:00:00.00   1st Qu.:2.475   1st Qu.:15.0      
    ##  Median :2018-04-16 00:00:00.00   Median :3.090   Median :15.0      
    ##  Mean   :2017-09-06 07:52:40.30   Mean   :3.025   Mean   :15.3      
    ##  3rd Qu.:2019-06-12 00:00:00.00   3rd Qu.:3.572   3rd Qu.:15.0      
    ##  Max.   :2021-01-04 00:00:00.00   Max.   :5.620   Max.   :20.0      
    ##  plastic_bottles  polystyrene    cigarette_butts  glass_bottles   
    ##  Min.   : 210    Min.   :  210   Min.   :   980   Min.   :  0.00  
    ##  1st Qu.:1075    1st Qu.:  990   1st Qu.:  5500   1st Qu.:  8.00  
    ##  Median :1980    Median : 2000   Median : 11000   Median : 18.00  
    ##  Mean   :2416    Mean   : 2460   Mean   : 23119   Mean   : 21.02  
    ##  3rd Qu.:2875    3rd Qu.: 3152   3rd Qu.: 28000   3rd Qu.: 29.50  
    ##  Max.   :9830    Max.   :11528   Max.   :310000   Max.   :110.00  
    ##   grocery_bags     chip_bags        sports_balls   homes_powered  
    ##  Min.   :   50   Min.   :  180.0   Min.   : 0.00   Min.   : 0.00  
    ##  1st Qu.:  480   1st Qu.:  878.5   1st Qu.: 3.00   1st Qu.:33.62  
    ##  Median :  890   Median : 1565.0   Median : 8.00   Median :48.83  
    ##  Mean   : 1394   Mean   : 2584.0   Mean   :10.18   Mean   :43.49  
    ##  3rd Qu.: 1752   3rd Qu.: 2760.0   3rd Qu.:14.00   3rd Qu.:57.17  
    ##  Max.   :13450   Max.   :20100.0   Max.   :56.00   Max.   :93.67

``` r
sum(pull(professor_trashwheel, weight_tons))
```

    ## [1] 135.5

``` r
mr_trashwheel2020 = filter(mr_trashwheel, year == 2020) 
sum(pull(mr_trashwheel2020, sports_balls))
```

    ## [1] 856

# Problem 3
